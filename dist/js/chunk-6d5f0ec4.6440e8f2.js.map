{"version":3,"sources":["webpack:///./src/views/page/productAdd.vue?4d9a","webpack:///./src/components/basicDetail.vue?be87","webpack:///src/components/basicDetail.vue","webpack:///./src/components/basicDetail.vue?4d49","webpack:///./src/components/basicDetail.vue","webpack:///./src/components/saleDetail.vue?ae19","webpack:///src/components/saleDetail.vue","webpack:///./src/components/saleDetail.vue?430c","webpack:///./src/components/saleDetail.vue","webpack:///src/views/page/productAdd.vue","webpack:///./src/views/page/productAdd.vue?fe8b","webpack:///./src/views/page/productAdd.vue","webpack:///./src/components/saleDetail.vue?e95f","webpack:///./src/views/page/productAdd.vue?550b","webpack:///./src/components/basicDetail.vue?ba42"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","current","_l","item","key","title","directives","name","rawName","value","expression","steps","form","base","on","$event","sale","handleFinish","handlePushImg","handleDeleteImg","staticRenderFns","ref","labelCol","wrapperCol","model","callback","$$v","$set","changeCategory","c","id","_v","_s","next","props","data","categoryList","categoryItems","rules","methods","console","log","category","$refs","ruleForm","validate","valid","mounted","component","$store","state","user","fileList","handlePreview","handleChange","length","_e","previewVisible","handleCancel","staticStyle","previewImage","prev","finish","getBase64","file","Promise","reader","readAsDataURL","onload","onerror","status","$emit","response","url","setTimeout","components","BasicDetail","SaleDetail","desc","c_items","tags","price","price_off","inventory","unit","images","$route","path","indexOf","appkey","params","push","filter"],"mappings":"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","file":"js/chunk-6d5f0ec4.6440e8f2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"product-detail\"},[_c('a-steps',{staticClass:\"steps\",attrs:{\"current\":_vm.current}},_vm._l((_vm.steps),function(item){return _c('a-step',{key:item.title,attrs:{\"title\":item.title}})}),1),_c('div',{staticClass:\"steps-content\"},[_c('BasicDetail',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.current === 0),expression:\"current === 0\"}],attrs:{\"current\":_vm.current,\"steps\":_vm.steps,\"form\":_vm.form.base},on:{\"next\":function($event){_vm.current+=1}}}),_c('SaleDetail',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.current === 1),expression:\"current === 1\"}],attrs:{\"form\":_vm.form.sale},on:{\"finish\":_vm.handleFinish,\"prev\":function($event){_vm.current -= 1},\"pushImg\":_vm.handlePushImg,\"deleteImg\":_vm.handleDeleteImg}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"basic-detail\"},[_c('a-form-model',{ref:\"ruleForm\",attrs:{\"model\":_vm.form,\"label-col\":_vm.labelCol,\"wrapper-col\":_vm.wrapperCol}},[_c('a-form-model-item',{ref:\"name\",attrs:{\"label\":\"商品标题\",\"required\":\"\",\"prop\":\"title\"}},[_c('a-input',{model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品描述\",\"prop\":\"desc\"}},[_c('a-input',{model:{value:(_vm.form.desc),callback:function ($$v) {_vm.$set(_vm.form, \"desc\", $$v)},expression:\"form.desc\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品类目\",\"required\":true,\"prop\":\"category\"}},[_c('a-select',{attrs:{\"placeholder\":\"请选择商品类别\"},on:{\"change\":_vm.changeCategory},model:{value:(_vm.form.category),callback:function ($$v) {_vm.$set(_vm.form, \"category\", $$v)},expression:\"form.category\"}},_vm._l((_vm.categoryList),function(c){return _c('a-select-option',{key:c.id,attrs:{\"value\":c.id}},[_vm._v(\" \"+_vm._s(c.name)+\" \")])}),1),_c('a-select',{attrs:{\"placeholder\":\"请选择子类目\"},model:{value:(_vm.form.c_items),callback:function ($$v) {_vm.$set(_vm.form, \"c_items\", $$v)},expression:\"form.c_items\"}},_vm._l((_vm.categoryItems),function(c){return _c('a-select-option',{key:c,attrs:{\"value\":c}},[_vm._v(\" \"+_vm._s(c)+\" \")])}),1)],1),_c('a-form-model-item',{attrs:{\"label\":\"商品标签\",\"prop\":\"tags\",\"required\":\"\"}},[_c('a-select',{attrs:{\"mode\":\"tags\",\"placeholder\":\"Please select\",\"default-value\":['包邮，最晚次日达']},model:{value:(_vm.form.tags),callback:function ($$v) {_vm.$set(_vm.form, \"tags\", $$v)},expression:\"form.tags\"}},[_c('a-select-option',{attrs:{\"value\":\"包邮，最晚次日达\"}},[_vm._v(\" \"+_vm._s('包邮最晚次日达')+\" \")])],1)],1),_c('a-form-model-item',[_c('div',{staticClass:\"steps-action\"},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.next}},[_vm._v(\" 下一步 \")])],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"basic-detail\">\r\n    <a-form-model\r\n        ref=\"ruleForm\"\r\n        :model=\"form\"\r\n        :label-col=\"labelCol\"\r\n        :wrapper-col=\"wrapperCol\"\r\n    >\r\n      <a-form-model-item ref=\"name\" label=\"商品标题\" required prop=\"title\">\r\n        <a-input v-model=\"form.title\"/>\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"商品描述\" prop=\"desc\">\r\n        <a-input v-model=\"form.desc\"/>\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"商品类目\" :required=\"true\" prop=\"category\">\r\n        <a-select v-model=\"form.category\" placeholder=\"请选择商品类别\"  @change=\"changeCategory\">\r\n          <a-select-option v-for=\"c in categoryList\" :key=\"c.id\" :value=\"c.id\">\r\n            {{c.name}}\r\n          </a-select-option>\r\n        </a-select>\r\n        <a-select v-model=\"form.c_items\" placeholder=\"请选择子类目\">\r\n          <a-select-option v-for=\"c in categoryItems\" :key=\"c\" :value=\"c\">\r\n            {{c}}\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"商品标签\" prop=\"tags\" required>\r\n        <a-select\r\n            mode=\"tags\"\r\n            placeholder=\"Please select\"\r\n            :default-value=\"['包邮，最晚次日达']\"\r\n            v-model=\"form.tags\"\r\n        >\r\n          <a-select-option value=\"包邮，最晚次日达\">\r\n            {{'包邮最晚次日达'}}\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-form-model-item>\r\n      <a-form-model-item>\r\n        <div class=\"steps-action\">\r\n          <a-button type=\"primary\" @click=\"next\">\r\n            下一步\r\n          </a-button>\r\n        </div>\r\n      </a-form-model-item>\r\n    </a-form-model>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport api from \"@/api/category\"\r\nexport default {\r\n  name: \"basicDetail\",\r\n  props: ['current','form'],\r\n  data() {\r\n    return {\r\n      categoryList: [],\r\n      categoryItems: [],\r\n      labelCol: { span: 5 },\r\n      wrapperCol: { span: 13 },\r\n      rules: []\r\n    };\r\n  },\r\n  methods: {\r\n    changeCategory(category){\r\n      console.log(category);\r\n      for (let item of this.categoryList){\r\n        if (item.id === category){\r\n          this.categoryItems = item.c_items;\r\n          return;\r\n        }\r\n      }\r\n    },\r\n    next() {\r\n      this.$refs.ruleForm.validate(valid => {\r\n        if (valid) {\r\n          this.$emit('next');\r\n        } else {\r\n          this.$emit('next')\r\n          return false;\r\n        }\r\n      });\r\n    }\r\n  },\r\n  mounted() {\r\n    api.list(this.$store.state.user).then((res)=>{\r\n      this.categoryList = res.data;\r\n    })\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .steps-action {\r\n    position: relative;\r\n    left: 250px;\r\n  }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./basicDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./basicDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./basicDetail.vue?vue&type=template&id=3094c6e7&scoped=true&\"\nimport script from \"./basicDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./basicDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./basicDetail.vue?vue&type=style&index=0&id=3094c6e7&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3094c6e7\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"sale-detail\"},[_c('a-form-model',{ref:\"ruleForm\",attrs:{\"model\":_vm.form,\"label-col\":_vm.labelCol,\"wrapper-col\":_vm.wrapperCol}},[_c('a-form-model-item',{ref:\"name\",attrs:{\"label\":\"商品价格\",\"required\":\"\",\"prop\":\"price\"}},[_c('a-input',{model:{value:(_vm.form.price),callback:function ($$v) {_vm.$set(_vm.form, \"price\", $$v)},expression:\"form.price\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"折扣价格\",\"prop\":\"price_off\"}},[_c('a-input',{model:{value:(_vm.form.price_off),callback:function ($$v) {_vm.$set(_vm.form, \"price_off\", $$v)},expression:\"form.price_off\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品库存\",\"required\":true,\"prop\":\"inventory\"}},[_c('a-input',{model:{value:(_vm.form.inventory),callback:function ($$v) {_vm.$set(_vm.form, \"inventory\", $$v)},expression:\"form.inventory\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"计量单位\",\"prop\":\"unit\",\"required\":\"\"}},[_c('a-input',{model:{value:(_vm.form.unit),callback:function ($$v) {_vm.$set(_vm.form, \"unit\", $$v)},expression:\"form.unit\"}})],1),_c('a-form-model-item',{attrs:{\"label\":\"商品相册\",\"prop\":\"images\"}},[_c('a-upload',{attrs:{\"action\":(\"https://mallapi.duyiedu.com/upload/images?appkey=\" + (this.$store.state.user.appkey)),\"list-type\":\"picture-card\",\"file-list\":_vm.fileList,\"name\":\"avatar\"},on:{\"preview\":_vm.handlePreview,\"change\":_vm.handleChange}},[(_vm.fileList.length < 8)?_c('div',[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_c('div',{staticClass:\"ant-upload-text\"},[_vm._v(\" Upload \")])],1):_vm._e()]),_c('a-modal',{attrs:{\"visible\":_vm.previewVisible,\"footer\":null},on:{\"cancel\":_vm.handleCancel}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"alt\":\"example\",\"src\":_vm.previewImage}})])],1),_c('a-form-model-item',[_c('div',{staticClass:\"steps-action\"},[_c('a-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.prev}},[_vm._v(\" 上一步 \")]),_c('a-button',{staticStyle:{\"margin-left\":\"30px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.finish}},[_vm._v(\" 提交 \")])],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"sale-detail\">\r\n    <a-form-model\r\n        ref=\"ruleForm\"\r\n        :model=\"form\"\r\n        :label-col=\"labelCol\"\r\n        :wrapper-col=\"wrapperCol\"\r\n    >\r\n      <a-form-model-item ref=\"name\" label=\"商品价格\" required prop=\"price\">\r\n        <a-input v-model=\"form.price\"/>\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"折扣价格\" prop=\"price_off\">\r\n        <a-input v-model=\"form.price_off\"/>\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"商品库存\" :required=\"true\" prop=\"inventory\">\r\n        <a-input v-model=\"form.inventory\"/>\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"计量单位\" prop=\"unit\" required>\r\n        <a-input v-model=\"form.unit\"/>\r\n      </a-form-model-item>\r\n      <a-form-model-item label=\"商品相册\" prop=\"images\">\r\n        <a-upload\r\n            :action=\"`https://mallapi.duyiedu.com/upload/images?appkey=${this.$store.state.user.appkey}`\"\r\n            list-type=\"picture-card\"\r\n            @preview=\"handlePreview\"\r\n            @change=\"handleChange\"\r\n            :file-list=\"fileList\"\r\n            name=\"avatar\"\r\n        >\r\n          <div v-if=\"fileList.length < 8\">\r\n            <a-icon type=\"plus\" />\r\n            <div class=\"ant-upload-text\">\r\n              Upload\r\n            </div>\r\n          </div>\r\n        </a-upload>\r\n        <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel\">\r\n          <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n        </a-modal>\r\n      </a-form-model-item>\r\n      <a-form-model-item>\r\n        <div class=\"steps-action\">\r\n          <a-button type=\"primary\" @click=\"prev\">\r\n            上一步\r\n          </a-button>\r\n          <a-button type=\"primary\" @click=\"finish\" style=\"margin-left: 30px\">\r\n            提交\r\n          </a-button>\r\n        </div>\r\n      </a-form-model-item>\r\n    </a-form-model>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\nexport default {\r\n  name: \"saleDetail\",\r\n  props: ['form'],\r\n  data(){\r\n    return{\r\n      fileList: [],\r\n      labelCol: { span: 5 },\r\n      wrapperCol: { span: 13 },\r\n      previewVisible: false,\r\n      previewImage: '',\r\n    }\r\n  },\r\n  methods:{\r\n    handleCancel() {\r\n      this.previewVisible = false;\r\n    },\r\n    async handlePreview(file) {\r\n      if (!file.url && !file.preview) {\r\n        file.preview = await getBase64(file.originFileObj);\r\n      }\r\n      this.previewImage = file.url || file.preview;\r\n      this.previewVisible = true;\r\n    },\r\n    handleChange({fileList, file}) {\r\n      if (file.status === 'done'){\r\n        this.$emit('pushImg', file.response.data.url)\r\n      }\r\n      if (file.status === 'removed'){\r\n        this.$emit('deleteImg', file.response.data.url);\r\n      }\r\n      this.fileList = fileList;\r\n    },\r\n    prev(){\r\n      this.$emit('prev');\r\n    },\r\n    finish(){\r\n      this.$emit('finish');\r\n    }\r\n  },\r\n  mounted() {\r\n    let index = 1\r\n    setTimeout(()=>{\r\n      if (this.form.images){\r\n        for (let i of this.form.images){\r\n          this.fileList.push({\r\n            uid: '-'+index,\r\n            name: 'image.png',\r\n            status: 'done',\r\n            url: i\r\n          });\r\n          index += 1;\r\n        }\r\n      }\r\n    },1000)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .steps-action {\r\n    position: relative;\r\n    left: 250px;\r\n  }\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./saleDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./saleDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./saleDetail.vue?vue&type=template&id=c612609a&scoped=true&\"\nimport script from \"./saleDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./saleDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./saleDetail.vue?vue&type=style&index=0&id=c612609a&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c612609a\",\n  null\n  \n)\n\nexport default component.exports","<template>\r\n  <div class=\"product-detail\">\r\n    <a-steps :current=\"current\" class=\"steps\">\r\n      <a-step v-for=\"item in steps\" :key=\"item.title\" :title=\"item.title\" />\r\n    </a-steps>\r\n    <div class=\"steps-content\">\r\n      <BasicDetail\r\n          :current=\"current\"\r\n          :steps=\"steps\"\r\n          v-show=\"current === 0\"\r\n          @next=\"current+=1\"\r\n          :form=\"form.base\"\r\n      ></BasicDetail>\r\n      <SaleDetail\r\n          @finish=\"handleFinish\"\r\n          :form=\"form.sale\"\r\n          v-show=\"current === 1\"\r\n          @prev=\"current -= 1\"\r\n          @pushImg=\"handlePushImg\"\r\n          @deleteImg=\"handleDeleteImg\"\r\n      ></SaleDetail>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport BasicDetail from \"@/components/basicDetail\"\r\nimport SaleDetail from \"@/components/saleDetail\";\r\nimport api from \"@/api/product\"\r\nexport default {\r\n  name: \"productAdd\",\r\n  components: {\r\n    BasicDetail,\r\n    SaleDetail\r\n  },\r\n  data(){\r\n    return{\r\n      current: 0,\r\n      steps: [\r\n        {\r\n          title: '填写商品基本信息',\r\n          content: 'First-content',\r\n        },\r\n        {\r\n          title: '填写商品销售信息',\r\n          content: 'Second-content',\r\n        },\r\n      ],\r\n      form: {\r\n        base: {\r\n          title: '',\r\n          desc: '',\r\n          category: '',\r\n          c_items: [],\r\n          tags: []\r\n        },\r\n        sale: {\r\n          price: 0,\r\n          price_off: 0,\r\n          inventory: 0,\r\n          unit: '',\r\n          images: [],\r\n          status: 1,\r\n          sale: 10010\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    handleFinish(){\r\n      if (this.$route.path.indexOf('edit') !== -1){\r\n        api.edit({\r\n          appkey: this.$store.state.user.appkey,\r\n          id: this.$route.params.id,\r\n          ...this.form.base,\r\n          ...this.form.sale,\r\n        }).then(()=>{\r\n          this.$message.success(\"修改成功\");\r\n          this.$router.push({\r\n            name: 'ProductList'\r\n          })\r\n          this.$store.commit('changeMenuCurrent', 'ProductList');\r\n        })\r\n      }else {\r\n        api.add({\r\n          appkey: this.$store.state.user.appkey,\r\n          ...this.form.base,\r\n          ...this.form.sale\r\n        }).then(()=>{\r\n          this.$message.success(\"添加成功\");\r\n          this.$router.push({\r\n            name: 'ProductList'\r\n          })\r\n          this.$store.commit('changeMenuCurrent', 'ProductList');\r\n        })\r\n      }\r\n    },\r\n    handlePushImg(url){\r\n      this.form.sale.images.push(url);\r\n    },\r\n    handleDeleteImg(url){\r\n      this.form.sale.images = this.form.sale.images.filter((item)=> item !== url)\r\n    }\r\n  },\r\n  mounted() {\r\n    if (this.$route.path.indexOf('edit') !== -1){\r\n      const {id} = this.$route.params\r\n      api.detail(id, this.$store.state.user).then((res)=>{\r\n        this.form.base.title = res.title;\r\n        this.form.base.desc = res.desc\r\n        this.form.base.category = res.category\r\n        this.form.base.c_items = res.c_items\r\n        this.form.base.tags = res.tags\r\n\r\n        this.form.sale.price = res.price;\r\n        this.form.sale.price_off = res.price_off;\r\n        this.form.sale.inventory = res.inventory;\r\n        this.form.sale.unit = res.unit;\r\n        this.form.sale.images = res.images;\r\n        this.form.sale.status = res.status;\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .steps-content {\r\n    margin-top: 16px;\r\n    border: 1px dashed #e9e9e9;\r\n    border-radius: 6px;\r\n    background-color: #fafafa;\r\n    min-height: 200px;\r\n    text-align: center;\r\n    padding-top: 80px;\r\n  }\r\n\r\n  .steps-action {\r\n    margin-top: 24px;\r\n    display: flex;\r\n    justify-content: center;\r\n  }\r\n\r\n  .product-detail{\r\n    padding: 0 40px;\r\n  }\r\n\r\n  .steps{\r\n    width: 70%;\r\n    margin: 20px auto;\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productAdd.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productAdd.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./productAdd.vue?vue&type=template&id=8e7d64f4&scoped=true&\"\nimport script from \"./productAdd.vue?vue&type=script&lang=js&\"\nexport * from \"./productAdd.vue?vue&type=script&lang=js&\"\nimport style0 from \"./productAdd.vue?vue&type=style&index=0&id=8e7d64f4&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"8e7d64f4\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./saleDetail.vue?vue&type=style&index=0&id=c612609a&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./productAdd.vue?vue&type=style&index=0&id=8e7d64f4&scoped=true&lang=less&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./basicDetail.vue?vue&type=style&index=0&id=3094c6e7&scoped=true&lang=css&\""],"sourceRoot":""}