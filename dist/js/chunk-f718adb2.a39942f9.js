(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f718adb2"],{"0dd4":function(t,e,a){},"59f0":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"productList-container",staticStyle:{"background-color":"#fff"}},[a("Search",{attrs:{"category-list":t.categoryList},on:{submit:t.handleSearch}}),a("Table",{attrs:{data:t.tableData,page:t.page},on:{pageChange:t.handlePageChange,edit:t.handleEditProduct,remove:t.handleRemoveProduct}})],1)},o=[],i=a("5530"),r=a("b85c"),c=(a("b0c0"),a("d81d"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-form",{staticClass:"searchForm",attrs:{layout:"inline"}},[a("a-form-item",{attrs:{label:"搜索关键字"}},[a("a-input",{attrs:{placeholder:"请输入搜索的关键字"},model:{value:t.searchInfo.searchWord,callback:function(e){t.$set(t.searchInfo,"searchWord",e)},expression:"searchInfo.searchWord"}})],1),a("a-form-item",{staticStyle:{"margin-left":"20px"},attrs:{label:"商品类目"}},[a("a-select",{staticStyle:{width:"200px"},attrs:{allowClear:!0,placeholder:"请选择商品类目"},on:{change:t.handleChange}},t._l(t.categoryList,(function(e){return a("a-select-option",{key:e.id,attrs:{value:e.name}},[t._v(" "+t._s(e.name)+" ")])})),1)],1),a("a-form-item",[a("a-button",{attrs:{type:"primary","html-type":"submit"},on:{click:t.handleSubmit}},[t._v(" 搜索 ")])],1)],1)}),s=[],l={data:function(){return{searchInfo:{searchWord:"",category:""}}},props:["categoryList"],methods:{handleChange:function(t){this.searchInfo.category=t},handleSubmit:function(){this.$emit("submit",this.searchInfo)}}},d=l,u=(a("fc3d"),a("2877")),h=Object(u["a"])(d,c,s,!1,null,"169cb692",null),p=h.exports,f=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-table",{attrs:{columns:t.columns,"data-source":t.data,pagination:t.page},on:{change:t.handleChange},scopedSlots:t._u([{key:"operation",fn:function(e,n){return a("div",{staticStyle:{"white-space":"nowrap"}},[a("a-button",{on:{click:function(e){return t.handleEditProduct(n)}}},[t._v("编辑")]),a("a-button",{on:{click:function(e){return t.handleRemoveProduct(n)}}},[t._v("删除")])],1)}}])})},g=[],m=[{title:"Id",dataIndex:"id",key:"id"},{title:"标题",dataIndex:"title",key:"title",width:200},{title:"描述",dataIndex:"desc",key:"desc",width:200},{title:"类目",dataIndex:"categoryName",key:"address category",ellipsis:!0},{title:"预售价格",dataIndex:"price",key:"price",ellipsis:!0},{title:"折扣价格",dataIndex:"price_off",key:"price_off",ellipsis:!0},{title:"标签",dataIndex:"tags",key:"tags",ellipsis:!0,width:150},{title:"购买数量",dataIndex:"inventory",key:"inventory",ellipsis:!0},{title:"上架状态",dataIndex:"status",key:"status",ellipsis:!0,customRender:function(t,e){return 1===e.status?"上架":"下架"}},{title:"操作",dataIndex:"operation",key:"operation",scopedSlots:{customRender:"operation"},width:200}],y={data:function(){return{columns:m,pagination:{current:1,pageSize:10,showSizeChanger:!0,total:10}}},props:["data","page"],methods:{handleChange:function(t){this.$emit("pageChange",t)},handleEditProduct:function(t){this.$emit("edit",t)},handleRemoveProduct:function(t){this.$emit("remove",t)}}},b=y,v=Object(u["a"])(b,f,g,!1,null,null,null),k=v.exports,x=a("c4c8"),I=a("c405"),S={name:"productList",data:function(){return{tableData:[],searchForm:{},categoryList:[],page:{current:1,pageSize:10,total:1}}},components:{Search:p,Table:k},methods:{handleSearch:function(t){var e,a=Object(r["a"])(this.categoryList);try{for(a.s();!(e=a.n()).done;){var n=e.value;if(n.name===t.category)return this.searchForm={category:n.id,searchWord:n.searchWord},void this.getTableData()}}catch(o){a.e(o)}finally{a.f()}this.getTableData()},handlePageChange:function(t){this.page=t,this.getTableData()},getTableData:function(){var t=this;x["a"].getTableList(Object(i["a"])(Object(i["a"])({page:this.page.current,size:this.page.pageSize},this.searchForm),{},{appkey:this.$store.state.user.appkey})).then((function(e){t.page.total=e.total,t.tableData=e.data.map((function(e){return Object(i["a"])(Object(i["a"])({},e),{},{key:e.id,categoryName:t.categoryList[e.category-1].name})}))}))},handleEditProduct:function(t){this.$router.push({name:"ProductEdit",params:{id:t.id}})},handleRemoveProduct:function(t){var e=this;this.$confirm({title:"确认删除",content:"确认删除产品标题为："+t.title,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){x["a"].remove({id:t.id,appkey:e.$store.state.user.appkey}).then((function(t){e.getTableData(),console.log(t)})),console.log("OK")},onCancel:function(){console.log("Cancel")}})}},mounted:function(){var t=this;I["a"].list(this.$store.state.user).then((function(e){t.categoryList=e.data})),this.getTableData()}},w=S,_=Object(u["a"])(w,n,o,!1,null,"f56228ac",null);e["default"]=_.exports},d81d:function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").map,i=a("1dde"),r=i("map");n({target:"Array",proto:!0,forced:!r},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},fc3d:function(t,e,a){"use strict";a("0dd4")}}]);
//# sourceMappingURL=chunk-f718adb2.a39942f9.js.map